/*
 * imagesLoaded PACKAGED v4.1.1
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(b,a){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",a):"object"==typeof module&&module.exports?module.exports=a():b.EvEmitter=a()}("undefined"!=typeof window?window:this,function(){function b(){}var a=b.prototype;return a.on=function(g,c){if(g&&c){var d=this._events=this._events||{},f=d[g]=d[g]||[];return -1==f.indexOf(c)&&f.push(c),this}},a.once=function(g,c){if(g&&c){this.on(g,c);var d=this._onceEvents=this._onceEvents||{},f=d[g]=d[g]||{};return f[c]=!0,this}},a.off=function(g,c){var d=this._events&&this._events[g];if(d&&d.length){var f=d.indexOf(c);return -1!=f&&d.splice(f,1),this}},a.emitEvent=function(k,c){var d=this._events&&this._events[k];if(d&&d.length){var f=0,g=d[f];c=c||[];for(var h=this._onceEvents&&this._onceEvents[k];g;){var j=h&&h[g];j&&(this.off(k,g),delete h[g]),g.apply(this,c),f+=j?0:1,g=d[f]}return this}},b}),function(b,a){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(c){return a(b,c)}):"object"==typeof module&&module.exports?module.exports=a(b,require("ev-emitter")):b.imagesLoaded=a(b,b.EvEmitter)}(window,function(q,f){function j(h,a){for(var d in a){h[d]=a[d]}return h}function k(h){var a=[];if(Array.isArray(h)){a=h}else{if("number"==typeof h.length){for(var d=0;d<h.length;d++){a.push(h[d])}}else{a.push(h)}}return a}function l(h,a,d){return this instanceof l?("string"==typeof h&&(h=document.querySelectorAll(h)),this.elements=k(h),this.options=j({},this.options),"function"==typeof a?d=a:j(this.options,a),d&&this.on("always",d),this.getImages(),g&&(this.jqDeferred=new g.Deferred),void setTimeout(function(){this.check()}.bind(this))):new l(h,a,d)}function m(a){this.img=a}function p(d,a){this.url=d,this.element=a,this.img=new Image}var g=q.jQuery,b=q.console;l.prototype=Object.create(f.prototype),l.prototype.options={},l.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},l.prototype.addElementImages=function(x){"IMG"==x.nodeName&&this.addImage(x),this.options.background===!0&&this.addElementBackgroundImages(x);var a=x.nodeType;if(a&&c[a]){for(var d=x.querySelectorAll("img"),h=0;h<d.length;h++){var u=d[h];this.addImage(u)}if("string"==typeof this.options.background){var v=x.querySelectorAll(this.options.background);for(h=0;h<v.length;h++){var w=v[h];this.addElementBackgroundImages(w)}}}};var c={1:!0,9:!0,11:!0};return l.prototype.addElementBackgroundImages=function(s){var a=getComputedStyle(s);if(a){for(var d=/url\((['"])?(.*?)\1\)/gi,h=d.exec(a.backgroundImage);null!==h;){var r=h&&h[2];r&&this.addBackground(r,s),h=d.exec(a.backgroundImage)}}},l.prototype.addImage=function(d){var a=new m(d);this.images.push(a)},l.prototype.addBackground=function(h,a){var d=new p(h,a);this.images.push(d)},l.prototype.check=function(){function d(o,e,h){setTimeout(function(){a.progress(o,e,h)})}var a=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(h){h.once("progress",d),h.check()}):void this.complete()},l.prototype.progress=function(h,a,d){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!h.isLoaded,this.emitEvent("progress",[this,h,a]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,h),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&b&&b.log("progress: "+d,h,a)},l.prototype.complete=function(){var d=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(d,[this]),this.emitEvent("always",[this]),this.jqDeferred){var a=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[a](this)}},m.prototype=Object.create(f.prototype),m.prototype.check=function(){var a=this.getIsImageComplete();return a?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void (this.proxyImage.src=this.img.src))},m.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},m.prototype.confirm=function(d,a){this.isLoaded=d,this.emitEvent("progress",[this,this.img,a])},m.prototype.handleEvent=function(d){var a="on"+d.type;this[a]&&this[a](d)},m.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},m.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},m.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},p.prototype=Object.create(m.prototype),p.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var a=this.getIsImageComplete();a&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},p.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},p.prototype.confirm=function(d,a){this.isLoaded=d,this.emitEvent("progress",[this,this.element,a])},l.makeJQueryPlugin=function(a){a=a||q.jQuery,a&&(g=a,g.fn.imagesLoaded=function(n,d){var h=new l(this,n,d);return h.jqDeferred.promise(g(this))})},l.makeJQueryPlugin(),l});